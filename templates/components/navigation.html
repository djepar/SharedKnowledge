<!-- templates/components/navigation.html -->
{% if session.user %}
<nav class="nav-bar">
    <div class="nav-links">
        <a href="{{ url_for('index') }}" class="nav-link {% if request.endpoint == 'index' %}active{% endif %}">
            ğŸ  Accueil
        </a>
        <a href="{{ url_for('dashboard') }}" class="nav-link {% if request.endpoint == 'dashboard' %}active{% endif %}">
            ğŸ“Š Tableau de bord
        </a>
        <a href="{{ url_for('calendar') }}" class="nav-link {% if request.endpoint == 'calendar' %}active{% endif %}">
            ğŸ“… Calendrier
        </a>
        <a href="{{ url_for('lessons_list') }}" class="nav-link {% if request.endpoint == 'lessons_list' %}active{% endif %}">
            ğŸ“‹ Gestion des leÃ§ons
        </a>
        <a href="{{ url_for('theory') }}" class="nav-link {% if request.endpoint == 'theory' %}active{% endif %}">
            ğŸ“Š Ressources thÃ©oriques
        </a>
        <div class="nav-dropdown">
            <a href="#" class="nav-link dropdown-toggle {% if 'exercise' in request.endpoint or 'grammar_gender' in request.endpoint %}active{% endif %}">
                âœï¸ Exercices
            </a>
            <div class="dropdown-menu">
                <div class="dropdown-submenu">
                    <a href="#" class="dropdown-item dropdown-toggle">
                        ğŸ”¢ MathÃ©matiques
                    </a>
                    <div class="dropdown-submenu-content">
                        <a href="{{ url_for('math_exercises', subdiscipline='algebre') }}" class="dropdown-subitem">
                            ğŸ“Š AlgÃ¨bre
                        </a>
                        <a href="{{ url_for('math_exercises', subdiscipline='geometrie') }}" class="dropdown-subitem">
                            ğŸ“ GÃ©omÃ©trie  
                        </a>
                        <a href="{{ url_for('math_exercises', subdiscipline='arithmetique') }}" class="dropdown-subitem">
                            ğŸ”¢ ArithmÃ©tique
                        </a>
                        <a href="{{ url_for('math_exercises', subdiscipline='probabilites') }}" class="dropdown-subitem">
                            ğŸ² ProbabilitÃ©s
                        </a>
                    </div>
                </div>
                <div class="dropdown-submenu">
                    <a href="#" class="dropdown-item dropdown-toggle">
                        ğŸ“– FranÃ§ais
                    </a>
                    <div class="dropdown-submenu-content">
                        <a href="{{ url_for('grammar_gender_exercises') }}" class="dropdown-subitem {% if 'grammar_gender' in request.endpoint %}active{% endif %}">
                            ğŸ“š Genre grammatical
                        </a>
                        <a href="{{ url_for('french_exercises', subdiscipline='orthographe') }}" class="dropdown-subitem">
                            âœï¸ Orthographe
                        </a>
                        <a href="{{ url_for('french_exercises', subdiscipline='conjugaison') }}" class="dropdown-subitem">
                            ğŸ”„ Conjugaison
                        </a>
                        <a href="{{ url_for('french_exercises', subdiscipline='vocabulaire') }}" class="dropdown-subitem">
                            ğŸ“ Vocabulaire
                        </a>
                    </div>
                </div>
                <div class="dropdown-submenu">
                    <a href="#" class="dropdown-item dropdown-toggle">
                        ğŸ›ï¸ Histoire
                    </a>
                    <div class="dropdown-submenu-content">
                        <a href="{{ url_for('history_exercises', subdiscipline='analyse_artefact') }}" class="dropdown-subitem">
                            ğŸº Analyse d'artÃ©fact
                        </a>
                        <a href="{{ url_for('history_exercises', subdiscipline='ligne_temps') }}" class="dropdown-subitem">
                            ğŸ“… Ligne du temps
                        </a>
                        <a href="{{ url_for('history_exercises', subdiscipline='caracteristiques_historiques') }}" class="dropdown-subitem">
                            ğŸ“‹ CaractÃ©ristiques historiques
                        </a>
                    </div>
                </div>
                <div class="dropdown-submenu">
                    <a href="#" class="dropdown-item dropdown-toggle">
                        ğŸŒ GÃ©ographie
                    </a>
                    <div class="dropdown-submenu-content">
                        <a href="{{ url_for('geography_exercises', subdiscipline='carte') }}" class="dropdown-subitem">
                            ğŸ—ºï¸ Cartes
                        </a>
                    </div>
                </div>
                <div class="dropdown-submenu">
                    <a href="#" class="dropdown-item dropdown-toggle">
                        ğŸ³ï¸ Culture et citoyennetÃ©
                    </a>
                    <div class="dropdown-submenu-content">
                        <a href="{{ url_for('ccq_exercises', subdiscipline='reflexion') }}" class="dropdown-subitem">
                            ğŸ’­ RÃ©flexion
                        </a>
                    </div>
                </div>
                <a href="{{ url_for('exercises') }}" class="dropdown-item {% if request.endpoint == 'exercises' %}active{% endif %}">
                    ğŸ“ Tous les exercices
                </a>
            </div>
        </div>
        <a href="{{ url_for('portfolio') }}" class="nav-link {% if request.endpoint == 'portfolio' %}active{% endif %}">
            ğŸ“ Portfolio & Travaux
        </a>
   
        <div class="nav-dropdown">
            <a href="#" class="nav-link dropdown-toggle">
                ğŸ“š Disciplines{% if session.discipline %} â€¢ {{ session.discipline.replace('_', ' ').title() }}{% endif %}
            </a>
            <div class="dropdown-menu">
                <a href="{{ url_for('set_discipline', discipline='mathematiques') }}" class="dropdown-item {% if session.discipline == 'mathematiques' %}active{% endif %}">
                    ğŸ”¢ MathÃ©matiques
                </a>
                <a href="{{ url_for('set_discipline', discipline='francais') }}" class="dropdown-item {% if session.discipline == 'francais' %}active{% endif %}">
                    ğŸ“– FranÃ§ais
                </a>
                <a href="{{ url_for('set_discipline', discipline='histoire') }}" class="dropdown-item {% if session.discipline == 'histoire' %}active{% endif %}">
                    ğŸ›ï¸ Histoire
                </a>
                <a href="{{ url_for('set_discipline', discipline='culture_citoyennete') }}" class="dropdown-item {% if session.discipline == 'culture_citoyennete' %}active{% endif %}">
                    ğŸ³ï¸ Culture et citoyennetÃ©
                </a>
                <a href="{{ url_for('set_discipline', discipline='geographie') }}" class="dropdown-item {% if session.discipline == 'geographie' %}active{% endif %}">
                    ğŸŒ GÃ©ographie
                </a>
            </div>
        </div>
    </div>
    <div class="nav-user">
        <span class="user-greeting">ğŸ‘‹ {{ session.user or name or 'Utilisateur' }}</span>
        <a href="{{ url_for('logout') }}" class="logout-btn">DÃ©connexion</a>
    </div>
</nav>
{% endif %}
