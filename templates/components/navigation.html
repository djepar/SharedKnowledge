<!-- templates/components/navigation.html -->
{% if session.user %}
<nav class="nav-bar">
    <div class="nav-links">
        <a href="{{ url_for('index') }}" class="nav-link {% if request.endpoint == 'index' %}active{% endif %}">
            🏠 Accueil
        </a>
        <a href="{{ url_for('dashboard') }}" class="nav-link {% if request.endpoint == 'dashboard' %}active{% endif %}">
            📊 Tableau de bord
        </a>
        <a href="{{ url_for('calendar') }}" class="nav-link {% if request.endpoint == 'calendar' %}active{% endif %}">
            📅 Calendrier
        </a>
        <a href="{{ url_for('lessons_list') }}" class="nav-link {% if request.endpoint == 'lessons_list' %}active{% endif %}">
            📋 Gestion des leçons
        </a>
        <a href="{{ url_for('theory') }}" class="nav-link {% if request.endpoint == 'theory' %}active{% endif %}">
            📊 Ressources théoriques
        </a>
        <div class="nav-dropdown">
            <a href="#" class="nav-link dropdown-toggle {% if 'exercise' in request.endpoint or 'grammar_gender' in request.endpoint %}active{% endif %}">
                ✏️ Exercices
            </a>
            <div class="dropdown-menu">
                <div class="dropdown-submenu">
                    <a href="#" class="dropdown-item dropdown-toggle">
                        🔢 Mathématiques
                    </a>
                    <div class="dropdown-submenu-content">
                        <a href="{{ url_for('math_exercises', subdiscipline='algebre') }}" class="dropdown-subitem">
                            📊 Algèbre
                        </a>
                        <a href="{{ url_for('math_exercises', subdiscipline='geometrie') }}" class="dropdown-subitem">
                            📐 Géométrie  
                        </a>
                        <a href="{{ url_for('math_exercises', subdiscipline='arithmetique') }}" class="dropdown-subitem">
                            🔢 Arithmétique
                        </a>
                        <a href="{{ url_for('math_exercises', subdiscipline='probabilites') }}" class="dropdown-subitem">
                            🎲 Probabilités
                        </a>
                    </div>
                </div>
                <div class="dropdown-submenu">
                    <a href="#" class="dropdown-item dropdown-toggle">
                        📖 Français
                    </a>
                    <div class="dropdown-submenu-content">
                        <a href="{{ url_for('grammar_gender_exercises') }}" class="dropdown-subitem {% if 'grammar_gender' in request.endpoint %}active{% endif %}">
                            📚 Genre grammatical
                        </a>
                        <a href="{{ url_for('french_exercises', subdiscipline='orthographe') }}" class="dropdown-subitem">
                            ✏️ Orthographe
                        </a>
                        <a href="{{ url_for('french_exercises', subdiscipline='conjugaison') }}" class="dropdown-subitem">
                            🔄 Conjugaison
                        </a>
                        <a href="{{ url_for('french_exercises', subdiscipline='vocabulaire') }}" class="dropdown-subitem">
                            📝 Vocabulaire
                        </a>
                    </div>
                </div>
                <div class="dropdown-submenu">
                    <a href="#" class="dropdown-item dropdown-toggle">
                        🏛️ Histoire
                    </a>
                    <div class="dropdown-submenu-content">
                        <a href="{{ url_for('history_exercises', subdiscipline='analyse_artefact') }}" class="dropdown-subitem">
                            🏺 Analyse d'artéfact
                        </a>
                        <a href="{{ url_for('history_exercises', subdiscipline='ligne_temps') }}" class="dropdown-subitem">
                            📅 Ligne du temps
                        </a>
                        <a href="{{ url_for('history_exercises', subdiscipline='caracteristiques_historiques') }}" class="dropdown-subitem">
                            📋 Caractéristiques historiques
                        </a>
                    </div>
                </div>
                <div class="dropdown-submenu">
                    <a href="#" class="dropdown-item dropdown-toggle">
                        🌍 Géographie
                    </a>
                    <div class="dropdown-submenu-content">
                        <a href="{{ url_for('geography_exercises', subdiscipline='carte') }}" class="dropdown-subitem">
                            🗺️ Cartes
                        </a>
                    </div>
                </div>
                <div class="dropdown-submenu">
                    <a href="#" class="dropdown-item dropdown-toggle">
                        🏳️ Culture et citoyenneté
                    </a>
                    <div class="dropdown-submenu-content">
                        <a href="{{ url_for('ccq_exercises', subdiscipline='reflexion') }}" class="dropdown-subitem">
                            💭 Réflexion
                        </a>
                    </div>
                </div>
                <a href="{{ url_for('exercises') }}" class="dropdown-item {% if request.endpoint == 'exercises' %}active{% endif %}">
                    📝 Tous les exercices
                </a>
            </div>
        </div>
        <a href="{{ url_for('portfolio') }}" class="nav-link {% if request.endpoint == 'portfolio' %}active{% endif %}">
            📁 Portfolio & Travaux
        </a>
   
        <div class="nav-dropdown">
            <a href="#" class="nav-link dropdown-toggle">
                📚 Disciplines{% if session.discipline %} • {{ session.discipline.replace('_', ' ').title() }}{% endif %}
            </a>
            <div class="dropdown-menu">
                <a href="{{ url_for('set_discipline', discipline='mathematiques') }}" class="dropdown-item {% if session.discipline == 'mathematiques' %}active{% endif %}">
                    🔢 Mathématiques
                </a>
                <a href="{{ url_for('set_discipline', discipline='francais') }}" class="dropdown-item {% if session.discipline == 'francais' %}active{% endif %}">
                    📖 Français
                </a>
                <a href="{{ url_for('set_discipline', discipline='histoire') }}" class="dropdown-item {% if session.discipline == 'histoire' %}active{% endif %}">
                    🏛️ Histoire
                </a>
                <a href="{{ url_for('set_discipline', discipline='culture_citoyennete') }}" class="dropdown-item {% if session.discipline == 'culture_citoyennete' %}active{% endif %}">
                    🏳️ Culture et citoyenneté
                </a>
                <a href="{{ url_for('set_discipline', discipline='geographie') }}" class="dropdown-item {% if session.discipline == 'geographie' %}active{% endif %}">
                    🌍 Géographie
                </a>
            </div>
        </div>
    </div>
    <div class="nav-user">
        <span class="user-greeting">👋 {{ session.user or name or 'Utilisateur' }}</span>
        <a href="{{ url_for('logout') }}" class="logout-btn">Déconnexion</a>
    </div>
</nav>
{% endif %}
