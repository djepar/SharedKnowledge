{% extends "base.html" %}

{% block title %}Cr√©er un exercice{% endblock %}

{% block additional_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/components/exercises.css') }}">
<link rel="stylesheet" href="{{ url_for('static', filename='css/components/forms.css') }}">
<link rel="stylesheet" href="{{ url_for('static', filename='css/components/edit-lesson.css') }}">
{% endblock %}

{% block content %}
<div class="edit-lesson-container">
    <div class="edit-lesson-header">
        <h1>‚úèÔ∏è Cr√©er un exercice</h1>
        <p>Cr√©ez un nouvel exercice li√© √† une le√ßon ou ressource th√©orique</p>
    </div>

    <form method="POST" class="lesson-form">
        <div class="form-section">
            <div class="form-group">
                <label for="title">Titre de l'exercice *</label>
                <input type="text" id="title" name="title" required>
        </div>

            <div class="form-row">
                <div class="form-group">
                    <label for="lesson_id">Le√ßon associ√©e</label>
                    <select id="lesson_id" name="lesson_id">
                    <option value="">Aucune le√ßon</option>
                    {% for lesson in lessons %}
                        <option value="{{ lesson[0] }}">{{ lesson[1] }}</option>
                    {% endfor %}
                </select>
            </div>

                <div class="form-group">
                    <label for="theory_id">Ressource th√©orique</label>
                    <select id="theory_id" name="theory_id">
                    <option value="">Aucune ressource</option>
                    {% for item in theory_items %}
                        <option value="{{ item[0] }}">{{ item[1] }}</option>
                    {% endfor %}
                </select>
            </div>
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label for="exercise_type">Type d'exercice *</label>
                    <select id="exercise_type" name="exercise_type" required>
                    <option value="">S√©lectionner un type</option>
                    
                    <!-- Math√©matiques -->
                    <optgroup label="üî¢ Math√©matiques">
                        <option value="algebre">Alg√®bre</option>
                        <option value="geometrie">G√©om√©trie</option>
                        <option value="arithmetique">Arithm√©tique</option>
                        <option value="probabilites">Probabilit√©s</option>
                        <option value="calcul">Calcul</option>
                        <option value="equations">√âquations</option>
                        <option value="problemes">Probl√®mes</option>
                    </optgroup>
                    
                    <!-- Fran√ßais -->
                    <optgroup label="üìñ Fran√ßais">
                        <option value="grammaire">Grammaire</option>
                        <option value="orthographe">Orthographe</option>
                        <option value="conjugaison">Conjugaison</option>
                        <option value="vocabulaire">Vocabulaire</option>
                        <option value="redaction">R√©daction</option>
                        <option value="analyse">Analyse de texte</option>
                        <option value="comprehension">Compr√©hension</option>
                    </optgroup>
                    
                    <!-- Histoire -->
                    <optgroup label="üèõÔ∏è Histoire">
                        <option value="analyse_artefact">Analyse d'un art√©fact</option>
                        <option value="ligne_temps">Ligne du temps</option>
                        <option value="caracteristiques_historiques">Caract√©ristiques historiques</option>
                        <option value="antiquite">Antiquit√©</option>
                        <option value="moyen_age">Moyen-√Çge</option>
                        <option value="moderne">Histoire moderne</option>
                    </optgroup>
                    
                    <!-- G√©ographie -->
                    <optgroup label="üåç G√©ographie">
                        <option value="carte">Carte</option>
                    </optgroup>
                    
                    <!-- Culture et citoyennet√© qu√©b√©coise -->
                    <optgroup label="üè≥Ô∏è Culture et citoyennet√©">
                        <option value="reflexion">R√©flexion</option>
                    </optgroup>
                    
                    <!-- G√©n√©ral -->
                    <optgroup label="üìù G√©n√©ral">
                        <option value="qcm">QCM</option>
                        <option value="vrai_faux">Vrai/Faux</option>
                        <option value="texte_a_trous">Texte √† trous</option>
                    </optgroup>
                </select>
            </div>

                <div class="form-group">
                    <label for="points">Points</label>
                    <input type="number" id="points" name="points" value="10" min="1" max="100">
            </div>
            </div>

            <div class="form-group">
                <label for="description">Description</label>
                <textarea id="description" name="description" rows="2" placeholder="Br√®ve description de l'exercice..."></textarea>
        </div>

            <div class="form-group">
                <label for="content">√ânonc√© de l'exercice *</label>
                <textarea id="content" name="content" class="content-textarea" rows="8" required placeholder="Saisissez l'√©nonc√© complet de l'exercice..."></textarea>
        </div>

            <div class="form-group">
                <label for="answer_key">Corrig√©</label>
                <textarea id="answer_key" name="answer_key" rows="6" placeholder="Saisissez le corrig√© ou les r√©ponses attendues..."></textarea>
        </div>

        </div>
        <div class="form-actions">
            <a href="{{ url_for('exercises') }}" class="btn btn-secondary">Annuler</a>
            <button type="submit" class="btn btn-primary">Cr√©er l'exercice</button>
        </div>
    </form>
</div>
{% endblock %}